<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app\js\GameController.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">app\js\GameController.js</span></h1>
    <h2>
        Statements: <span class="metric">52.78% <small>(38 / 72)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">50% <small>(2 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">23.08% <small>(6 / 26)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">52.78% <small>(38 / 72)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">app/js/</a> &#187; GameController.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">module.exports = function(app){
&nbsp;
	app.controller('GameController', ['GameFactory' , function(GameFactory){
		var scope = this;
&nbsp;
		scope.pageIndex = 0;
		scope.pageSize = 25;
		scope.onlyJoinedGames = false;
		scope.state = undefined;
&nbsp;
		scope.showModal = false;
		scope.games = [];
		scope.templates = [];
		getGames();
		getTemplates();
&nbsp;
	    function getTemplates(){
	    	GameFactory.getTemplates().success(<span class="fstat-no" title="function not covered" >function(data){</span>
<span class="cstat-no" title="statement not covered" >				scope.templates = data;</span>
			}).error(<span class="fstat-no" title="function not covered" >function(status, data) {</span>
<span class="cstat-no" title="statement not covered" >				console.log(status);</span>
<span class="cstat-no" title="statement not covered" >                console.log(data);</span>
			});
	    }
&nbsp;
		function getGames(){
			var queries = {};
			queries.pageIndex = scope.pageIndex;
			queries.pageSize = scope.pageSize;
			queries.onlyJoinedGames = scope.onlyJoinedGames;
			queries.state = scope.state;
&nbsp;
			GameFactory.getGames(queries).success(<span class="fstat-no" title="function not covered" >function(data){</span>
<span class="cstat-no" title="statement not covered" >				scope.games = data;</span>
			}).error(<span class="fstat-no" title="function not covered" >function(status, data) {</span>
<span class="cstat-no" title="statement not covered" >				console.log(status);</span>
<span class="cstat-no" title="statement not covered" >                console.log(data);</span>
			});
		}
&nbsp;
		scope.addGame = <span class="fstat-no" title="function not covered" >function(template) {</span>
<span class="cstat-no" title="statement not covered" >			GameFactory.addGame(template).success(<span class="fstat-no" title="function not covered" >function(data){</span></span>
<span class="cstat-no" title="statement not covered" >				scope.games.unshift(data);</span>
<span class="cstat-no" title="statement not covered" >				alert('Game is aangemaakt.');</span>
			}).error(<span class="fstat-no" title="function not covered" >function(status, data) {</span>
<span class="cstat-no" title="statement not covered" >				console.log(status);</span>
<span class="cstat-no" title="statement not covered" >                console.log(data);</span>
			});
&nbsp;
<span class="cstat-no" title="statement not covered" >			scope.toggleModal();</span>
		}
&nbsp;
		scope.joinGame = <span class="fstat-no" title="function not covered" >function(game) {</span>
<span class="cstat-no" title="statement not covered" >			event.preventDefault();</span>
<span class="cstat-no" title="statement not covered" >			GameFactory.joinGame(game).success(<span class="fstat-no" title="function not covered" >function(data){</span></span>
<span class="cstat-no" title="statement not covered" >				game.player = data.player;</span>
			}).error(<span class="fstat-no" title="function not covered" >function(status, data) {</span>
<span class="cstat-no" title="statement not covered" >				console.log(status);</span>
<span class="cstat-no" title="statement not covered" >                console.log(data);</span>
			});;
		}
&nbsp;
		scope.openGame = <span class="fstat-no" title="function not covered" >function(game){</span>
<span class="cstat-no" title="statement not covered" >			scope.currentGamePlayers = GameFactory.openGame(game);</span>
<span class="cstat-no" title="statement not covered" >			scope.currentGameTiles = game.tiles;</span>
		}
&nbsp;
		scope.startGame = <span class="fstat-no" title="function not covered" >function(game){</span>
<span class="cstat-no" title="statement not covered" >			GameFactory.startGame(game).success(<span class="fstat-no" title="function not covered" >function(data){</span></span>
<span class="cstat-no" title="statement not covered" >				game.state = 'playing';</span>
			}).error(<span class="fstat-no" title="function not covered" >function(status, data) {</span>
<span class="cstat-no" title="statement not covered" >				console.log(status);</span>
<span class="cstat-no" title="statement not covered" >                console.log(data);</span>
			});
		}
&nbsp;
		scope.toggleModal = <span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >	        scope.showModal = !scope.showModal;</span>
	    }
&nbsp;
	    scope.toggleOnlyJoinedGames = <span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >	    	scope.pageIndex = 0;</span>
<span class="cstat-no" title="statement not covered" >	        scope.onlyJoinedGames = !scope.onlyJoinedGames;</span>
<span class="cstat-no" title="statement not covered" >	        getGames();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >	        if(scope.onlyJoinedGames){</span>
<span class="cstat-no" title="statement not covered" >	        	$('#yourGamesButton').html("Alle games");</span>
	        } else {
<span class="cstat-no" title="statement not covered" >	        	$('#yourGamesButton').html("Alleen jouw games");</span>
	        }
	    }
&nbsp;
		scope.nextPage = function(){
			scope.pageIndex = scope.pageIndex + 1;
			getGames();
		}
&nbsp;
		scope.prevPage = function(){
			if(scope.pageIndex &gt; 0){
				scope.pageIndex = scope.pageIndex - 1;
				getGames();
			}
		}
&nbsp;
		scope.doesGameContainUser = <span class="fstat-no" title="function not covered" >function(game){</span>
<span class="cstat-no" title="statement not covered" >			return GameFactory.doesGameContainUser(game);</span>
		}
&nbsp;
		scope.isUserOwner = <span class="fstat-no" title="function not covered" >function(game){</span>
<span class="cstat-no" title="statement not covered" >			return GameFactory.isUserOwner(game);</span>
		}
&nbsp;
		scope.refreshGames = <span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >			getGames();</span>
		}
&nbsp;
		scope.isState = <span class="fstat-no" title="function not covered" >function(game, state){</span>
<span class="cstat-no" title="statement not covered" >			return game.state === state;</span>
		}
&nbsp;
	}]);
	
}</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Jun 21 2015 19:23:38 GMT+0200 (W. Europe Daylight Time)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
